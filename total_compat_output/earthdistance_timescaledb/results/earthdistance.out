--
--  Test earthdistance extension
--
-- In this file we also do some testing of extension create/drop scenarios.
-- That's really exercising the core database's dependency logic, so ideally
-- we'd do it in the core regression tests, but we can't for lack of suitable
-- guaranteed-available extensions.  earthdistance is a good test case because
-- it has a dependency on the cube extension.
--
CREATE EXTENSION earthdistance;  -- fail, must install cube first
ERROR:  required extension "cube" is not installed
HINT:  Use CREATE EXTENSION ... CASCADE to install required extensions too.
CREATE EXTENSION cube;
CREATE EXTENSION earthdistance;
--
-- The radius of the Earth we are using.
--
SELECT earth()::numeric(20,5);
     earth     
---------------
 6378168.00000
(1 row)

--
-- Convert straight line distances to great circle distances.
--
SELECT (pi()*earth())::numeric(20,5);
    numeric     
----------------
 20037605.73216
(1 row)

SELECT sec_to_gc(0)::numeric(20,5);
 sec_to_gc 
-----------
   0.00000
(1 row)

SELECT sec_to_gc(2*earth())::numeric(20,5);
   sec_to_gc    
----------------
 20037605.73216
(1 row)

SELECT sec_to_gc(10*earth())::numeric(20,5);
   sec_to_gc    
----------------
 20037605.73216
(1 row)

SELECT sec_to_gc(-earth())::numeric(20,5);
 sec_to_gc 
-----------
   0.00000
(1 row)

SELECT sec_to_gc(1000)::numeric(20,5);
 sec_to_gc  
------------
 1000.00000
(1 row)

SELECT sec_to_gc(10000)::numeric(20,5);
  sec_to_gc  
-------------
 10000.00102
(1 row)

SELECT sec_to_gc(100000)::numeric(20,5);
  sec_to_gc   
--------------
 100001.02426
(1 row)

SELECT sec_to_gc(1000000)::numeric(20,5);
   sec_to_gc   
---------------
 1001027.07131
(1 row)

--
-- Convert great circle distances to straight line distances.
--
SELECT gc_to_sec(0)::numeric(20,5);
 gc_to_sec 
-----------
   0.00000
(1 row)

SELECT gc_to_sec(sec_to_gc(2*earth()))::numeric(20,5);
   gc_to_sec    
----------------
 12756336.00000
(1 row)

SELECT gc_to_sec(10*earth())::numeric(20,5);
   gc_to_sec    
----------------
 12756336.00000
(1 row)

SELECT gc_to_sec(pi()*earth())::numeric(20,5);
   gc_to_sec    
----------------
 12756336.00000
(1 row)

SELECT gc_to_sec(-1000)::numeric(20,5);
 gc_to_sec 
-----------
   0.00000
(1 row)

SELECT gc_to_sec(1000)::numeric(20,5);
 gc_to_sec  
------------
 1000.00000
(1 row)

SELECT gc_to_sec(10000)::numeric(20,5);
 gc_to_sec  
------------
 9999.99898
(1 row)

SELECT gc_to_sec(100000)::numeric(20,5);
  gc_to_sec  
-------------
 99998.97577
(1 row)

SELECT gc_to_sec(1000000)::numeric(20,5);
  gc_to_sec   
--------------
 998976.08618
(1 row)

--
-- Set coordinates using latitude and longitude.
-- Extract each coordinate separately so we can round them.
--
SELECT cube_ll_coord(ll_to_earth(0,0),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(0,0),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(0,0),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord 
---------------+---------------+---------------
 6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(360,360),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(360,360),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(360,360),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord 
---------------+---------------+---------------
 6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(180,180),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(180,180),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(180,180),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord 
---------------+---------------+---------------
 6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(180,360),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(180,360),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(180,360),3)::numeric(20,5);
 cube_ll_coord  | cube_ll_coord | cube_ll_coord 
----------------+---------------+---------------
 -6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(-180,-360),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(-180,-360),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(-180,-360),3)::numeric(20,5);
 cube_ll_coord  | cube_ll_coord | cube_ll_coord 
----------------+---------------+---------------
 -6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(0,180),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(0,180),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(0,180),3)::numeric(20,5);
 cube_ll_coord  | cube_ll_coord | cube_ll_coord 
----------------+---------------+---------------
 -6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(0,-180),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(0,-180),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(0,-180),3)::numeric(20,5);
 cube_ll_coord  | cube_ll_coord | cube_ll_coord 
----------------+---------------+---------------
 -6378168.00000 |       0.00000 |       0.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(90,0),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(90,0),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(90,0),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord 
---------------+---------------+---------------
       0.00000 |       0.00000 | 6378168.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(90,180),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(90,180),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(90,180),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord 
---------------+---------------+---------------
       0.00000 |       0.00000 | 6378168.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(-90,0),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(-90,0),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(-90,0),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord  
---------------+---------------+----------------
       0.00000 |       0.00000 | -6378168.00000
(1 row)

SELECT cube_ll_coord(ll_to_earth(-90,180),1)::numeric(20,5),
 cube_ll_coord(ll_to_earth(-90,180),2)::numeric(20,5),
 cube_ll_coord(ll_to_earth(-90,180),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord  
---------------+---------------+----------------
       0.00000 |       0.00000 | -6378168.00000
(1 row)

--
-- Test getting the latitude of a location.
--
SELECT latitude(ll_to_earth(0,0))::numeric(20,10);
   latitude   
--------------
 0.0000000000
(1 row)

SELECT latitude(ll_to_earth(45,0))::numeric(20,10);
   latitude    
---------------
 45.0000000000
(1 row)

SELECT latitude(ll_to_earth(90,0))::numeric(20,10);
   latitude    
---------------
 90.0000000000
(1 row)

SELECT latitude(ll_to_earth(-45,0))::numeric(20,10);
    latitude    
----------------
 -45.0000000000
(1 row)

SELECT latitude(ll_to_earth(-90,0))::numeric(20,10);
    latitude    
----------------
 -90.0000000000
(1 row)

SELECT latitude(ll_to_earth(0,90))::numeric(20,10);
   latitude   
--------------
 0.0000000000
(1 row)

SELECT latitude(ll_to_earth(45,90))::numeric(20,10);
   latitude    
---------------
 45.0000000000
(1 row)

SELECT latitude(ll_to_earth(90,90))::numeric(20,10);
   latitude    
---------------
 90.0000000000
(1 row)

SELECT latitude(ll_to_earth(-45,90))::numeric(20,10);
    latitude    
----------------
 -45.0000000000
(1 row)

SELECT latitude(ll_to_earth(-90,90))::numeric(20,10);
    latitude    
----------------
 -90.0000000000
(1 row)

SELECT latitude(ll_to_earth(0,180))::numeric(20,10);
   latitude   
--------------
 0.0000000000
(1 row)

SELECT latitude(ll_to_earth(45,180))::numeric(20,10);
   latitude    
---------------
 45.0000000000
(1 row)

SELECT latitude(ll_to_earth(90,180))::numeric(20,10);
   latitude    
---------------
 90.0000000000
(1 row)

SELECT latitude(ll_to_earth(-45,180))::numeric(20,10);
    latitude    
----------------
 -45.0000000000
(1 row)

SELECT latitude(ll_to_earth(-90,180))::numeric(20,10);
    latitude    
----------------
 -90.0000000000
(1 row)

SELECT latitude(ll_to_earth(0,-90))::numeric(20,10);
   latitude   
--------------
 0.0000000000
(1 row)

SELECT latitude(ll_to_earth(45,-90))::numeric(20,10);
   latitude    
---------------
 45.0000000000
(1 row)

SELECT latitude(ll_to_earth(90,-90))::numeric(20,10);
   latitude    
---------------
 90.0000000000
(1 row)

SELECT latitude(ll_to_earth(-45,-90))::numeric(20,10);
    latitude    
----------------
 -45.0000000000
(1 row)

SELECT latitude(ll_to_earth(-90,-90))::numeric(20,10);
    latitude    
----------------
 -90.0000000000
(1 row)

--
-- Test getting the longitude of a location.
--
SELECT longitude(ll_to_earth(0,0))::numeric(20,10);
  longitude   
--------------
 0.0000000000
(1 row)

SELECT longitude(ll_to_earth(45,0))::numeric(20,10);
  longitude   
--------------
 0.0000000000
(1 row)

SELECT longitude(ll_to_earth(90,0))::numeric(20,10);
  longitude   
--------------
 0.0000000000
(1 row)

SELECT longitude(ll_to_earth(-45,0))::numeric(20,10);
  longitude   
--------------
 0.0000000000
(1 row)

SELECT longitude(ll_to_earth(-90,0))::numeric(20,10);
  longitude   
--------------
 0.0000000000
(1 row)

SELECT longitude(ll_to_earth(0,90))::numeric(20,10);
   longitude   
---------------
 90.0000000000
(1 row)

SELECT longitude(ll_to_earth(45,90))::numeric(20,10);
   longitude   
---------------
 90.0000000000
(1 row)

SELECT longitude(ll_to_earth(90,90))::numeric(20,10);
   longitude   
---------------
 90.0000000000
(1 row)

SELECT longitude(ll_to_earth(-45,90))::numeric(20,10);
   longitude   
---------------
 90.0000000000
(1 row)

SELECT longitude(ll_to_earth(-90,90))::numeric(20,10);
   longitude   
---------------
 90.0000000000
(1 row)

SELECT longitude(ll_to_earth(0,180))::numeric(20,10);
   longitude    
----------------
 180.0000000000
(1 row)

SELECT longitude(ll_to_earth(45,180))::numeric(20,10);
   longitude    
----------------
 180.0000000000
(1 row)

SELECT longitude(ll_to_earth(90,180))::numeric(20,10);
   longitude    
----------------
 180.0000000000
(1 row)

SELECT longitude(ll_to_earth(-45,180))::numeric(20,10);
   longitude    
----------------
 180.0000000000
(1 row)

SELECT longitude(ll_to_earth(-90,180))::numeric(20,10);
   longitude    
----------------
 180.0000000000
(1 row)

SELECT longitude(ll_to_earth(0,-90))::numeric(20,10);
   longitude    
----------------
 -90.0000000000
(1 row)

SELECT longitude(ll_to_earth(45,-90))::numeric(20,10);
   longitude    
----------------
 -90.0000000000
(1 row)

SELECT longitude(ll_to_earth(90,-90))::numeric(20,10);
   longitude    
----------------
 -90.0000000000
(1 row)

SELECT longitude(ll_to_earth(-45,-90))::numeric(20,10);
   longitude    
----------------
 -90.0000000000
(1 row)

SELECT longitude(ll_to_earth(-90,-90))::numeric(20,10);
   longitude    
----------------
 -90.0000000000
(1 row)

--
-- For the distance tests the following is some real life data.
--
-- Chicago has a latitude of 41.8 and a longitude of 87.6.
-- Albuquerque has a latitude of 35.1 and a longitude of 106.7.
-- (Note that latitude and longitude are specified differently
-- in the cube based functions than for the point based functions.)
--
--
-- Test getting the distance between two points using earth_distance.
--
SELECT earth_distance(ll_to_earth(0,0),ll_to_earth(0,0))::numeric(20,5);
 earth_distance 
----------------
        0.00000
(1 row)

SELECT earth_distance(ll_to_earth(0,0),ll_to_earth(0,180))::numeric(20,5);
 earth_distance 
----------------
 20037605.73216
(1 row)

SELECT earth_distance(ll_to_earth(0,0),ll_to_earth(90,0))::numeric(20,5);
 earth_distance 
----------------
 10018802.86608
(1 row)

SELECT earth_distance(ll_to_earth(0,0),ll_to_earth(0,90))::numeric(20,5);
 earth_distance 
----------------
 10018802.86608
(1 row)

SELECT earth_distance(ll_to_earth(0,0),ll_to_earth(0,1))::numeric(20,5);
 earth_distance 
----------------
   111320.03185
(1 row)

SELECT earth_distance(ll_to_earth(0,0),ll_to_earth(1,0))::numeric(20,5);
 earth_distance 
----------------
   111320.03185
(1 row)

SELECT earth_distance(ll_to_earth(30,0),ll_to_earth(30,1))::numeric(20,5);
 earth_distance 
----------------
    96405.66962
(1 row)

SELECT earth_distance(ll_to_earth(30,0),ll_to_earth(31,0))::numeric(20,5);
 earth_distance 
----------------
   111320.03185
(1 row)

SELECT earth_distance(ll_to_earth(60,0),ll_to_earth(60,1))::numeric(20,5);
 earth_distance 
----------------
    55659.48608
(1 row)

SELECT earth_distance(ll_to_earth(60,0),ll_to_earth(61,0))::numeric(20,5);
 earth_distance 
----------------
   111320.03185
(1 row)

SELECT earth_distance(ll_to_earth(41.8,87.6),ll_to_earth(35.1,106.7))::numeric(20,5);
 earth_distance 
----------------
  1819303.21265
(1 row)

SELECT (earth_distance(ll_to_earth(41.8,87.6),ll_to_earth(35.1,106.7))*
      100./2.54/12./5280.)::numeric(20,5);
  numeric   
------------
 1130.46261
(1 row)

--
-- Test getting the distance between two points using geo_distance.
--
SELECT geo_distance('(0,0)'::point,'(0,0)'::point)::numeric(20,5);
 geo_distance 
--------------
      0.00000
(1 row)

SELECT geo_distance('(0,0)'::point,'(180,0)'::point)::numeric(20,5);
 geo_distance 
--------------
  12436.77274
(1 row)

SELECT geo_distance('(0,0)'::point,'(0,90)'::point)::numeric(20,5);
 geo_distance 
--------------
   6218.38637
(1 row)

SELECT geo_distance('(0,0)'::point,'(90,0)'::point)::numeric(20,5);
 geo_distance 
--------------
   6218.38637
(1 row)

SELECT geo_distance('(0,0)'::point,'(1,0)'::point)::numeric(20,5);
 geo_distance 
--------------
     69.09318
(1 row)

SELECT geo_distance('(0,0)'::point,'(0,1)'::point)::numeric(20,5);
 geo_distance 
--------------
     69.09318
(1 row)

SELECT geo_distance('(0,30)'::point,'(1,30)'::point)::numeric(20,5);
 geo_distance 
--------------
     59.83626
(1 row)

SELECT geo_distance('(0,30)'::point,'(0,31)'::point)::numeric(20,5);
 geo_distance 
--------------
     69.09318
(1 row)

SELECT geo_distance('(0,60)'::point,'(1,60)'::point)::numeric(20,5);
 geo_distance 
--------------
     34.54626
(1 row)

SELECT geo_distance('(0,60)'::point,'(0,61)'::point)::numeric(20,5);
 geo_distance 
--------------
     69.09318
(1 row)

SELECT geo_distance('(87.6,41.8)'::point,'(106.7,35.1)'::point)::numeric(20,5);
 geo_distance 
--------------
   1129.18983
(1 row)

SELECT (geo_distance('(87.6,41.8)'::point,'(106.7,35.1)'::point)*5280.*12.*2.54/100.)::numeric(20,5);
    numeric    
---------------
 1817254.87730
(1 row)

--
-- Test getting the distance between two points using the <@> operator.
--
SELECT ('(0,0)'::point <@> '(0,0)'::point)::numeric(20,5);
 numeric 
---------
 0.00000
(1 row)

SELECT ('(0,0)'::point <@> '(180,0)'::point)::numeric(20,5);
   numeric   
-------------
 12436.77274
(1 row)

SELECT ('(0,0)'::point <@> '(0,90)'::point)::numeric(20,5);
  numeric   
------------
 6218.38637
(1 row)

SELECT ('(0,0)'::point <@> '(90,0)'::point)::numeric(20,5);
  numeric   
------------
 6218.38637
(1 row)

SELECT ('(0,0)'::point <@> '(1,0)'::point)::numeric(20,5);
 numeric  
----------
 69.09318
(1 row)

SELECT ('(0,0)'::point <@> '(0,1)'::point)::numeric(20,5);
 numeric  
----------
 69.09318
(1 row)

SELECT ('(0,30)'::point <@> '(1,30)'::point)::numeric(20,5);
 numeric  
----------
 59.83626
(1 row)

SELECT ('(0,30)'::point <@> '(0,31)'::point)::numeric(20,5);
 numeric  
----------
 69.09318
(1 row)

SELECT ('(0,60)'::point <@> '(1,60)'::point)::numeric(20,5);
 numeric  
----------
 34.54626
(1 row)

SELECT ('(0,60)'::point <@> '(0,61)'::point)::numeric(20,5);
 numeric  
----------
 69.09318
(1 row)

SELECT ('(87.6,41.8)'::point <@> '(106.7,35.1)'::point)::numeric(20,5);
  numeric   
------------
 1129.18983
(1 row)

SELECT (('(87.6,41.8)'::point <@> '(106.7,35.1)'::point)*5280.*12.*2.54/100.)::numeric(20,5);
    numeric    
---------------
 1817254.87730
(1 row)

--
-- Test getting a bounding box around points.
--
SELECT cube_ll_coord(earth_box(ll_to_earth(0,0),112000),1)::numeric(20,5),
       cube_ll_coord(earth_box(ll_to_earth(0,0),112000),2)::numeric(20,5),
       cube_ll_coord(earth_box(ll_to_earth(0,0),112000),3)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),112000),1)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),112000),2)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),112000),3)::numeric(20,5);
 cube_ll_coord | cube_ll_coord | cube_ll_coord | cube_ur_coord | cube_ur_coord | cube_ur_coord 
---------------+---------------+---------------+---------------+---------------+---------------
 6266169.43896 | -111998.56104 | -111998.56104 | 6490166.56104 |  111998.56104 |  111998.56104
(1 row)

SELECT cube_ll_coord(earth_box(ll_to_earth(0,0),pi()*earth()),1)::numeric(20,5),
       cube_ll_coord(earth_box(ll_to_earth(0,0),pi()*earth()),2)::numeric(20,5),
       cube_ll_coord(earth_box(ll_to_earth(0,0),pi()*earth()),3)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),pi()*earth()),1)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),pi()*earth()),2)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),pi()*earth()),3)::numeric(20,5);
 cube_ll_coord  |  cube_ll_coord  |  cube_ll_coord  | cube_ur_coord  | cube_ur_coord  | cube_ur_coord  
----------------+-----------------+-----------------+----------------+----------------+----------------
 -6378168.00000 | -12756336.00000 | -12756336.00000 | 19134504.00000 | 12756336.00000 | 12756336.00000
(1 row)

SELECT cube_ll_coord(earth_box(ll_to_earth(0,0),10*earth()),1)::numeric(20,5),
       cube_ll_coord(earth_box(ll_to_earth(0,0),10*earth()),2)::numeric(20,5),
       cube_ll_coord(earth_box(ll_to_earth(0,0),10*earth()),3)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),10*earth()),1)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),10*earth()),2)::numeric(20,5),
       cube_ur_coord(earth_box(ll_to_earth(0,0),10*earth()),3)::numeric(20,5);
 cube_ll_coord  |  cube_ll_coord  |  cube_ll_coord  | cube_ur_coord  | cube_ur_coord  | cube_ur_coord  
----------------+-----------------+-----------------+----------------+----------------+----------------
 -6378168.00000 | -12756336.00000 | -12756336.00000 | 19134504.00000 | 12756336.00000 | 12756336.00000
(1 row)

--
-- Test for points that should be in bounding boxes.
--
SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,1))*1.00001) @>
       ll_to_earth(0,1);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.1))*1.00001) @>
       ll_to_earth(0,0.1);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.01))*1.00001) @>
       ll_to_earth(0,0.01);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.001))*1.00001) @>
       ll_to_earth(0,0.001);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.0001))*1.00001) @>
       ll_to_earth(0,0.0001);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0.0001,0.0001))*1.00001) @>
       ll_to_earth(0.0001,0.0001);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(45,45),
       earth_distance(ll_to_earth(45,45),ll_to_earth(45.0001,45.0001))*1.00001) @>
       ll_to_earth(45.0001,45.0001);
 ?column? 
----------
 t
(1 row)

SELECT earth_box(ll_to_earth(90,180),
       earth_distance(ll_to_earth(90,180),ll_to_earth(90.0001,180.0001))*1.00001) @>
       ll_to_earth(90.0001,180.0001);
 ?column? 
----------
 t
(1 row)

--
-- Test for points that shouldn't be in bounding boxes. Note that we need
-- to make points way outside, since some points close may be in the box
-- but further away than the distance we are testing.
--
SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,1))*.57735) @>
       ll_to_earth(0,1);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.1))*.57735) @>
       ll_to_earth(0,0.1);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.01))*.57735) @>
       ll_to_earth(0,0.01);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.001))*.57735) @>
       ll_to_earth(0,0.001);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0,0.0001))*.57735) @>
       ll_to_earth(0,0.0001);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(0,0),
       earth_distance(ll_to_earth(0,0),ll_to_earth(0.0001,0.0001))*.57735) @>
       ll_to_earth(0.0001,0.0001);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(45,45),
       earth_distance(ll_to_earth(45,45),ll_to_earth(45.0001,45.0001))*.57735) @>
       ll_to_earth(45.0001,45.0001);
 ?column? 
----------
 f
(1 row)

SELECT earth_box(ll_to_earth(90,180),
       earth_distance(ll_to_earth(90,180),ll_to_earth(90.0001,180.0001))*.57735) @>
       ll_to_earth(90.0001,180.0001);
 ?column? 
----------
 f
(1 row)

--
-- Test the recommended constraints.
--
SELECT cube_is_point(ll_to_earth(0,0));
 cube_is_point 
---------------
 t
(1 row)

SELECT cube_dim(ll_to_earth(0,0)) <= 3;
 ?column? 
----------
 t
(1 row)

SELECT abs(cube_distance(ll_to_earth(0,0), '(0)'::cube) / earth() - 1) <
       '10e-12'::float8;
 ?column? 
----------
 t
(1 row)

SELECT cube_is_point(ll_to_earth(30,60));
 cube_is_point 
---------------
 t
(1 row)

SELECT cube_dim(ll_to_earth(30,60)) <= 3;
 ?column? 
----------
 t
(1 row)

SELECT abs(cube_distance(ll_to_earth(30,60), '(0)'::cube) / earth() - 1) <
       '10e-12'::float8;
 ?column? 
----------
 t
(1 row)

SELECT cube_is_point(ll_to_earth(60,90));
 cube_is_point 
---------------
 t
(1 row)

SELECT cube_dim(ll_to_earth(60,90)) <= 3;
 ?column? 
----------
 t
(1 row)

SELECT abs(cube_distance(ll_to_earth(60,90), '(0)'::cube) / earth() - 1) <
       '10e-12'::float8;
 ?column? 
----------
 t
(1 row)

SELECT cube_is_point(ll_to_earth(-30,-90));
 cube_is_point 
---------------
 t
(1 row)

SELECT cube_dim(ll_to_earth(-30,-90)) <= 3;
 ?column? 
----------
 t
(1 row)

SELECT abs(cube_distance(ll_to_earth(-30,-90), '(0)'::cube) / earth() - 1) <
       '10e-12'::float8;
 ?column? 
----------
 t
(1 row)

--
-- Now we are going to test extension create/drop scenarios.
--
-- list what's installed
\dT
                                              List of data types
 Schema | Name  |                                         Description                                         
--------+-------+---------------------------------------------------------------------------------------------
 public | cube  | multi-dimensional cube '(FLOAT-1, FLOAT-2, ..., FLOAT-N), (FLOAT-1, FLOAT-2, ..., FLOAT-N)'
 public | earth | 
 public | rxid  | 
(3 rows)

drop extension cube;  -- fail, earthdistance requires it
ERROR:  cannot drop extension cube because other objects depend on it
DETAIL:  extension earthdistance depends on extension cube
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
drop extension earthdistance;
drop type cube;  -- fail, extension cube requires it
ERROR:  cannot drop type cube because extension cube requires it
HINT:  You can drop extension cube instead.
-- list what's installed
\dT
                                             List of data types
 Schema | Name |                                         Description                                         
--------+------+---------------------------------------------------------------------------------------------
 public | cube | multi-dimensional cube '(FLOAT-1, FLOAT-2, ..., FLOAT-N), (FLOAT-1, FLOAT-2, ..., FLOAT-N)'
 public | rxid | 
(2 rows)

create table foo (f1 cube, f2 int);
drop extension cube;  -- fail, foo.f1 requires it
ERROR:  cannot drop extension cube because other objects depend on it
DETAIL:  column f1 of table foo depends on type cube
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
drop table foo;
drop extension cube;
-- list what's installed
\dT
     List of data types
 Schema | Name | Description 
--------+------+-------------
 public | rxid | 
(1 row)

\df
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          List of functions
 Schema |                Name                |                                                                                                                                                                                            Result data type                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                          Argument data types                                                                                                                                                                                                                                                                                                                                                                                           | Type 
--------+------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------
 public | add_compression_policy             | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, compress_after "any", if_not_exists boolean DEFAULT false, schedule_interval interval DEFAULT NULL::interval, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | add_continuous_aggregate_policy    | integer                                                                                                                                                                                                                                                                                                                                                                                                | continuous_aggregate regclass, start_offset "any", end_offset "any", schedule_interval interval, if_not_exists boolean DEFAULT false, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | add_data_node                      | TABLE(node_name name, host text, port integer, database name, node_created boolean, database_created boolean, extension_created boolean)                                                                                                                                                                                                                                                               | node_name name, host text, database name DEFAULT NULL::name, port integer DEFAULT NULL::integer, if_not_exists boolean DEFAULT false, bootstrap boolean DEFAULT true, password text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | add_dimension                      | TABLE(dimension_id integer, schema_name name, table_name name, column_name name, created boolean)                                                                                                                                                                                                                                                                                                      | hypertable regclass, column_name name, number_partitions integer DEFAULT NULL::integer, chunk_time_interval anyelement DEFAULT NULL::bigint, partitioning_func regproc DEFAULT NULL::regproc, if_not_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | add_job                            | integer                                                                                                                                                                                                                                                                                                                                                                                                | proc regproc, schedule_interval interval, config jsonb DEFAULT NULL::jsonb, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, scheduled boolean DEFAULT true, check_config regproc DEFAULT NULL::regproc, fixed_schedule boolean DEFAULT true, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | add_reorder_policy                 | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, index_name name, if_not_exists boolean DEFAULT false, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | func
 public | add_retention_policy               | integer                                                                                                                                                                                                                                                                                                                                                                                                | relation regclass, drop_after "any", if_not_exists boolean DEFAULT false, schedule_interval interval DEFAULT NULL::interval, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | alter_data_node                    | TABLE(node_name name, host text, port integer, database name, available boolean)                                                                                                                                                                                                                                                                                                                       | node_name name, host text DEFAULT NULL::text, database name DEFAULT NULL::name, port integer DEFAULT NULL::integer, available boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | alter_job                          | TABLE(job_id integer, schedule_interval interval, max_runtime interval, max_retries integer, retry_period interval, scheduled boolean, config jsonb, next_start timestamp with time zone, check_config text)                                                                                                                                                                                           | job_id integer, schedule_interval interval DEFAULT NULL::interval, max_runtime interval DEFAULT NULL::interval, max_retries integer DEFAULT NULL::integer, retry_period interval DEFAULT NULL::interval, scheduled boolean DEFAULT NULL::boolean, config jsonb DEFAULT NULL::jsonb, next_start timestamp with time zone DEFAULT NULL::timestamp with time zone, if_exists boolean DEFAULT false, check_config regproc DEFAULT NULL::regproc                                                                                                                                                                                                                                                                                                                                                            | func
 public | approximate_row_count              | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | relation regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | attach_data_node                   | TABLE(hypertable_id integer, node_hypertable_id integer, node_name name)                                                                                                                                                                                                                                                                                                                               | node_name name, hypertable regclass, if_not_attached boolean DEFAULT false, repartition boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | attach_tablespace                  | void                                                                                                                                                                                                                                                                                                                                                                                                   | tablespace name, hypertable regclass, if_not_attached boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | cagg_migrate                       |                                                                                                                                                                                                                                                                                                                                                                                                        | IN cagg regclass, IN override boolean DEFAULT false, IN drop_old boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | proc
 public | chunk_compression_stats            | TABLE(chunk_schema name, chunk_name name, compression_status text, before_compression_table_bytes bigint, before_compression_index_bytes bigint, before_compression_toast_bytes bigint, before_compression_total_bytes bigint, after_compression_table_bytes bigint, after_compression_index_bytes bigint, after_compression_toast_bytes bigint, after_compression_total_bytes bigint, node_name name) | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | chunks_detailed_size               | TABLE(chunk_schema name, chunk_name name, table_bytes bigint, index_bytes bigint, toast_bytes bigint, total_bytes bigint, node_name name)                                                                                                                                                                                                                                                              | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | compress_chunk                     | regclass                                                                                                                                                                                                                                                                                                                                                                                               | uncompressed_chunk regclass, if_not_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | create_distributed_hypertable      | TABLE(hypertable_id integer, schema_name name, table_name name, created boolean)                                                                                                                                                                                                                                                                                                                       | relation regclass, time_column_name name, partitioning_column name DEFAULT NULL::name, number_partitions integer DEFAULT NULL::integer, associated_schema_name name DEFAULT NULL::name, associated_table_prefix name DEFAULT NULL::name, chunk_time_interval anyelement DEFAULT NULL::bigint, create_default_indexes boolean DEFAULT true, if_not_exists boolean DEFAULT false, partitioning_func regproc DEFAULT NULL::regproc, migrate_data boolean DEFAULT false, chunk_target_size text DEFAULT NULL::text, chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, time_partitioning_func regproc DEFAULT NULL::regproc, replication_factor integer DEFAULT NULL::integer, data_nodes name[] DEFAULT NULL::name[]                                            | func
 public | create_distributed_restore_point   | TABLE(node_name name, node_type text, restore_point pg_lsn)                                                                                                                                                                                                                                                                                                                                            | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | func
 public | create_hypertable                  | TABLE(hypertable_id integer, schema_name name, table_name name, created boolean)                                                                                                                                                                                                                                                                                                                       | relation regclass, time_column_name name, partitioning_column name DEFAULT NULL::name, number_partitions integer DEFAULT NULL::integer, associated_schema_name name DEFAULT NULL::name, associated_table_prefix name DEFAULT NULL::name, chunk_time_interval anyelement DEFAULT NULL::bigint, create_default_indexes boolean DEFAULT true, if_not_exists boolean DEFAULT false, partitioning_func regproc DEFAULT NULL::regproc, migrate_data boolean DEFAULT false, chunk_target_size text DEFAULT NULL::text, chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, time_partitioning_func regproc DEFAULT NULL::regproc, replication_factor integer DEFAULT NULL::integer, data_nodes name[] DEFAULT NULL::name[], distributed boolean DEFAULT NULL::boolean | func
 public | decompress_chunk                   | regclass                                                                                                                                                                                                                                                                                                                                                                                               | uncompressed_chunk regclass, if_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | delete_data_node                   | boolean                                                                                                                                                                                                                                                                                                                                                                                                | node_name name, if_exists boolean DEFAULT false, force boolean DEFAULT false, repartition boolean DEFAULT true, drop_database boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | delete_job                         | void                                                                                                                                                                                                                                                                                                                                                                                                   | job_id integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | detach_data_node                   | integer                                                                                                                                                                                                                                                                                                                                                                                                | node_name name, hypertable regclass DEFAULT NULL::regclass, if_attached boolean DEFAULT false, force boolean DEFAULT false, repartition boolean DEFAULT true, drop_remote_data boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | detach_tablespace                  | integer                                                                                                                                                                                                                                                                                                                                                                                                | tablespace name, hypertable regclass DEFAULT NULL::regclass, if_attached boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | detach_tablespaces                 | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | distributed_exec                   |                                                                                                                                                                                                                                                                                                                                                                                                        | IN query text, IN node_list name[] DEFAULT NULL::name[], IN transactional boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | proc
 public | drop_chunks                        | SETOF text                                                                                                                                                                                                                                                                                                                                                                                             | relation regclass, older_than "any" DEFAULT NULL::unknown, newer_than "any" DEFAULT NULL::unknown, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | first                              | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | anyelement, "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | agg
 public | get_telemetry_report               | jsonb                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | histogram                          | integer[]                                                                                                                                                                                                                                                                                                                                                                                              | double precision, double precision, double precision, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | agg
 public | hypertable_compression_stats       | TABLE(total_chunks bigint, number_compressed_chunks bigint, before_compression_table_bytes bigint, before_compression_index_bytes bigint, before_compression_toast_bytes bigint, before_compression_total_bytes bigint, after_compression_table_bytes bigint, after_compression_index_bytes bigint, after_compression_toast_bytes bigint, after_compression_total_bytes bigint, node_name name)        | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_detailed_size           | TABLE(table_bytes bigint, index_bytes bigint, toast_bytes bigint, total_bytes bigint, node_name name)                                                                                                                                                                                                                                                                                                  | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_index_size              | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | index_name regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_size                    | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | interpolate                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | value bigint, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | interpolate                        | double precision                                                                                                                                                                                                                                                                                                                                                                                       | value double precision, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | func
 public | interpolate                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | value integer, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | interpolate                        | real                                                                                                                                                                                                                                                                                                                                                                                                   | value real, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | interpolate                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | value smallint, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | last                               | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | anyelement, "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | agg
 public | locf                               | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | value anyelement, prev anyelement DEFAULT NULL::unknown, treat_null_as_missing boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | move_chunk                         | void                                                                                                                                                                                                                                                                                                                                                                                                   | chunk regclass, destination_tablespace name, index_destination_tablespace name DEFAULT NULL::name, reorder_index regclass DEFAULT NULL::regclass, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | recompress_chunk                   |                                                                                                                                                                                                                                                                                                                                                                                                        | IN chunk regclass, IN if_not_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | proc
 public | refresh_continuous_aggregate       |                                                                                                                                                                                                                                                                                                                                                                                                        | IN continuous_aggregate regclass, IN window_start "any", IN window_end "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | proc
 public | remove_compression_policy          | boolean                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | remove_continuous_aggregate_policy | void                                                                                                                                                                                                                                                                                                                                                                                                   | continuous_aggregate regclass, if_not_exists boolean DEFAULT false, if_exists boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | remove_reorder_policy              | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | remove_retention_policy            | void                                                                                                                                                                                                                                                                                                                                                                                                   | relation regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | reorder_chunk                      | void                                                                                                                                                                                                                                                                                                                                                                                                   | chunk regclass, index regclass DEFAULT NULL::regclass, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | run_job                            |                                                                                                                                                                                                                                                                                                                                                                                                        | IN job_id integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | proc
 public | set_adaptive_chunking              | record                                                                                                                                                                                                                                                                                                                                                                                                 | hypertable regclass, chunk_target_size text, INOUT chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, OUT chunk_target_size bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | set_chunk_time_interval            | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, chunk_time_interval anyelement, dimension_name name DEFAULT NULL::name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | set_integer_now_func               | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, integer_now_func regproc, replace_if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | set_number_partitions              | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, number_partitions integer, dimension_name name DEFAULT NULL::name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | set_replication_factor             | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, replication_factor integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | show_chunks                        | SETOF regclass                                                                                                                                                                                                                                                                                                                                                                                         | relation regclass, older_than "any" DEFAULT NULL::unknown, newer_than "any" DEFAULT NULL::unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | show_tablespaces                   | SETOF name                                                                                                                                                                                                                                                                                                                                                                                             | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | time_bucket                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint, "offset" bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | time_bucket                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer, "offset" integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, origin date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, origin timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, origin timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, timezone text, origin timestamp with time zone DEFAULT NULL::timestamp with time zone, "offset" interval DEFAULT NULL::interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint, "offset" smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket_gapfill                | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint, start bigint DEFAULT NULL::bigint, finish bigint DEFAULT NULL::bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket_gapfill                | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer, start integer DEFAULT NULL::integer, finish integer DEFAULT NULL::integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | time_bucket_gapfill                | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, start date DEFAULT NULL::date, finish date DEFAULT NULL::date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | func
 public | time_bucket_gapfill                | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, start timestamp without time zone DEFAULT NULL::timestamp without time zone, finish timestamp without time zone DEFAULT NULL::timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket_gapfill                | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, start timestamp with time zone DEFAULT NULL::timestamp with time zone, finish timestamp with time zone DEFAULT NULL::timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | time_bucket_gapfill                | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, timezone text, start timestamp with time zone DEFAULT NULL::timestamp with time zone, finish timestamp with time zone DEFAULT NULL::timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket_gapfill                | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint, start smallint DEFAULT NULL::smallint, finish smallint DEFAULT NULL::smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | timescaledb_fdw_handler            | fdw_handler                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | timescaledb_fdw_validator          | void                                                                                                                                                                                                                                                                                                                                                                                                   | text[], oid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | timescaledb_post_restore           | boolean                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | timescaledb_pre_restore            | boolean                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
(84 rows)

\do
                             List of operators
 Schema | Name | Left arg type | Right arg type | Result type | Description 
--------+------+---------------+----------------+-------------+-------------
(0 rows)

create schema c;
create extension cube with schema c;
-- list what's installed
\dT public.*
     List of data types
 Schema | Name | Description 
--------+------+-------------
 public | rxid | 
(1 row)

\df public.*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          List of functions
 Schema |                Name                |                                                                                                                                                                                            Result data type                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                          Argument data types                                                                                                                                                                                                                                                                                                                                                                                           | Type 
--------+------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------
 public | add_compression_policy             | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, compress_after "any", if_not_exists boolean DEFAULT false, schedule_interval interval DEFAULT NULL::interval, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | add_continuous_aggregate_policy    | integer                                                                                                                                                                                                                                                                                                                                                                                                | continuous_aggregate regclass, start_offset "any", end_offset "any", schedule_interval interval, if_not_exists boolean DEFAULT false, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | add_data_node                      | TABLE(node_name name, host text, port integer, database name, node_created boolean, database_created boolean, extension_created boolean)                                                                                                                                                                                                                                                               | node_name name, host text, database name DEFAULT NULL::name, port integer DEFAULT NULL::integer, if_not_exists boolean DEFAULT false, bootstrap boolean DEFAULT true, password text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | add_dimension                      | TABLE(dimension_id integer, schema_name name, table_name name, column_name name, created boolean)                                                                                                                                                                                                                                                                                                      | hypertable regclass, column_name name, number_partitions integer DEFAULT NULL::integer, chunk_time_interval anyelement DEFAULT NULL::bigint, partitioning_func regproc DEFAULT NULL::regproc, if_not_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | add_job                            | integer                                                                                                                                                                                                                                                                                                                                                                                                | proc regproc, schedule_interval interval, config jsonb DEFAULT NULL::jsonb, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, scheduled boolean DEFAULT true, check_config regproc DEFAULT NULL::regproc, fixed_schedule boolean DEFAULT true, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | add_reorder_policy                 | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, index_name name, if_not_exists boolean DEFAULT false, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | func
 public | add_retention_policy               | integer                                                                                                                                                                                                                                                                                                                                                                                                | relation regclass, drop_after "any", if_not_exists boolean DEFAULT false, schedule_interval interval DEFAULT NULL::interval, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | alter_data_node                    | TABLE(node_name name, host text, port integer, database name, available boolean)                                                                                                                                                                                                                                                                                                                       | node_name name, host text DEFAULT NULL::text, database name DEFAULT NULL::name, port integer DEFAULT NULL::integer, available boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | alter_job                          | TABLE(job_id integer, schedule_interval interval, max_runtime interval, max_retries integer, retry_period interval, scheduled boolean, config jsonb, next_start timestamp with time zone, check_config text)                                                                                                                                                                                           | job_id integer, schedule_interval interval DEFAULT NULL::interval, max_runtime interval DEFAULT NULL::interval, max_retries integer DEFAULT NULL::integer, retry_period interval DEFAULT NULL::interval, scheduled boolean DEFAULT NULL::boolean, config jsonb DEFAULT NULL::jsonb, next_start timestamp with time zone DEFAULT NULL::timestamp with time zone, if_exists boolean DEFAULT false, check_config regproc DEFAULT NULL::regproc                                                                                                                                                                                                                                                                                                                                                            | func
 public | approximate_row_count              | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | relation regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | attach_data_node                   | TABLE(hypertable_id integer, node_hypertable_id integer, node_name name)                                                                                                                                                                                                                                                                                                                               | node_name name, hypertable regclass, if_not_attached boolean DEFAULT false, repartition boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | attach_tablespace                  | void                                                                                                                                                                                                                                                                                                                                                                                                   | tablespace name, hypertable regclass, if_not_attached boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | cagg_migrate                       |                                                                                                                                                                                                                                                                                                                                                                                                        | IN cagg regclass, IN override boolean DEFAULT false, IN drop_old boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | proc
 public | chunk_compression_stats            | TABLE(chunk_schema name, chunk_name name, compression_status text, before_compression_table_bytes bigint, before_compression_index_bytes bigint, before_compression_toast_bytes bigint, before_compression_total_bytes bigint, after_compression_table_bytes bigint, after_compression_index_bytes bigint, after_compression_toast_bytes bigint, after_compression_total_bytes bigint, node_name name) | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | chunks_detailed_size               | TABLE(chunk_schema name, chunk_name name, table_bytes bigint, index_bytes bigint, toast_bytes bigint, total_bytes bigint, node_name name)                                                                                                                                                                                                                                                              | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | compress_chunk                     | regclass                                                                                                                                                                                                                                                                                                                                                                                               | uncompressed_chunk regclass, if_not_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | create_distributed_hypertable      | TABLE(hypertable_id integer, schema_name name, table_name name, created boolean)                                                                                                                                                                                                                                                                                                                       | relation regclass, time_column_name name, partitioning_column name DEFAULT NULL::name, number_partitions integer DEFAULT NULL::integer, associated_schema_name name DEFAULT NULL::name, associated_table_prefix name DEFAULT NULL::name, chunk_time_interval anyelement DEFAULT NULL::bigint, create_default_indexes boolean DEFAULT true, if_not_exists boolean DEFAULT false, partitioning_func regproc DEFAULT NULL::regproc, migrate_data boolean DEFAULT false, chunk_target_size text DEFAULT NULL::text, chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, time_partitioning_func regproc DEFAULT NULL::regproc, replication_factor integer DEFAULT NULL::integer, data_nodes name[] DEFAULT NULL::name[]                                            | func
 public | create_distributed_restore_point   | TABLE(node_name name, node_type text, restore_point pg_lsn)                                                                                                                                                                                                                                                                                                                                            | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | func
 public | create_hypertable                  | TABLE(hypertable_id integer, schema_name name, table_name name, created boolean)                                                                                                                                                                                                                                                                                                                       | relation regclass, time_column_name name, partitioning_column name DEFAULT NULL::name, number_partitions integer DEFAULT NULL::integer, associated_schema_name name DEFAULT NULL::name, associated_table_prefix name DEFAULT NULL::name, chunk_time_interval anyelement DEFAULT NULL::bigint, create_default_indexes boolean DEFAULT true, if_not_exists boolean DEFAULT false, partitioning_func regproc DEFAULT NULL::regproc, migrate_data boolean DEFAULT false, chunk_target_size text DEFAULT NULL::text, chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, time_partitioning_func regproc DEFAULT NULL::regproc, replication_factor integer DEFAULT NULL::integer, data_nodes name[] DEFAULT NULL::name[], distributed boolean DEFAULT NULL::boolean | func
 public | decompress_chunk                   | regclass                                                                                                                                                                                                                                                                                                                                                                                               | uncompressed_chunk regclass, if_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | delete_data_node                   | boolean                                                                                                                                                                                                                                                                                                                                                                                                | node_name name, if_exists boolean DEFAULT false, force boolean DEFAULT false, repartition boolean DEFAULT true, drop_database boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | delete_job                         | void                                                                                                                                                                                                                                                                                                                                                                                                   | job_id integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | detach_data_node                   | integer                                                                                                                                                                                                                                                                                                                                                                                                | node_name name, hypertable regclass DEFAULT NULL::regclass, if_attached boolean DEFAULT false, force boolean DEFAULT false, repartition boolean DEFAULT true, drop_remote_data boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | detach_tablespace                  | integer                                                                                                                                                                                                                                                                                                                                                                                                | tablespace name, hypertable regclass DEFAULT NULL::regclass, if_attached boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | detach_tablespaces                 | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | distributed_exec                   |                                                                                                                                                                                                                                                                                                                                                                                                        | IN query text, IN node_list name[] DEFAULT NULL::name[], IN transactional boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | proc
 public | drop_chunks                        | SETOF text                                                                                                                                                                                                                                                                                                                                                                                             | relation regclass, older_than "any" DEFAULT NULL::unknown, newer_than "any" DEFAULT NULL::unknown, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | first                              | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | anyelement, "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | agg
 public | get_telemetry_report               | jsonb                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | histogram                          | integer[]                                                                                                                                                                                                                                                                                                                                                                                              | double precision, double precision, double precision, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | agg
 public | hypertable_compression_stats       | TABLE(total_chunks bigint, number_compressed_chunks bigint, before_compression_table_bytes bigint, before_compression_index_bytes bigint, before_compression_toast_bytes bigint, before_compression_total_bytes bigint, after_compression_table_bytes bigint, after_compression_index_bytes bigint, after_compression_toast_bytes bigint, after_compression_total_bytes bigint, node_name name)        | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_detailed_size           | TABLE(table_bytes bigint, index_bytes bigint, toast_bytes bigint, total_bytes bigint, node_name name)                                                                                                                                                                                                                                                                                                  | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_index_size              | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | index_name regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_size                    | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | interpolate                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | value bigint, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | interpolate                        | double precision                                                                                                                                                                                                                                                                                                                                                                                       | value double precision, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | func
 public | interpolate                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | value integer, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | interpolate                        | real                                                                                                                                                                                                                                                                                                                                                                                                   | value real, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | interpolate                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | value smallint, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | last                               | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | anyelement, "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | agg
 public | locf                               | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | value anyelement, prev anyelement DEFAULT NULL::unknown, treat_null_as_missing boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | move_chunk                         | void                                                                                                                                                                                                                                                                                                                                                                                                   | chunk regclass, destination_tablespace name, index_destination_tablespace name DEFAULT NULL::name, reorder_index regclass DEFAULT NULL::regclass, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | recompress_chunk                   |                                                                                                                                                                                                                                                                                                                                                                                                        | IN chunk regclass, IN if_not_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | proc
 public | refresh_continuous_aggregate       |                                                                                                                                                                                                                                                                                                                                                                                                        | IN continuous_aggregate regclass, IN window_start "any", IN window_end "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | proc
 public | remove_compression_policy          | boolean                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | remove_continuous_aggregate_policy | void                                                                                                                                                                                                                                                                                                                                                                                                   | continuous_aggregate regclass, if_not_exists boolean DEFAULT false, if_exists boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | remove_reorder_policy              | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | remove_retention_policy            | void                                                                                                                                                                                                                                                                                                                                                                                                   | relation regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | reorder_chunk                      | void                                                                                                                                                                                                                                                                                                                                                                                                   | chunk regclass, index regclass DEFAULT NULL::regclass, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | run_job                            |                                                                                                                                                                                                                                                                                                                                                                                                        | IN job_id integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | proc
 public | set_adaptive_chunking              | record                                                                                                                                                                                                                                                                                                                                                                                                 | hypertable regclass, chunk_target_size text, INOUT chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, OUT chunk_target_size bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | set_chunk_time_interval            | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, chunk_time_interval anyelement, dimension_name name DEFAULT NULL::name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | set_integer_now_func               | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, integer_now_func regproc, replace_if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | set_number_partitions              | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, number_partitions integer, dimension_name name DEFAULT NULL::name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | set_replication_factor             | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, replication_factor integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | show_chunks                        | SETOF regclass                                                                                                                                                                                                                                                                                                                                                                                         | relation regclass, older_than "any" DEFAULT NULL::unknown, newer_than "any" DEFAULT NULL::unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | show_tablespaces                   | SETOF name                                                                                                                                                                                                                                                                                                                                                                                             | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | time_bucket                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint, "offset" bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | time_bucket                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer, "offset" integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, origin date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, origin timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, origin timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, timezone text, origin timestamp with time zone DEFAULT NULL::timestamp with time zone, "offset" interval DEFAULT NULL::interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint, "offset" smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket_gapfill                | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint, start bigint DEFAULT NULL::bigint, finish bigint DEFAULT NULL::bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket_gapfill                | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer, start integer DEFAULT NULL::integer, finish integer DEFAULT NULL::integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | time_bucket_gapfill                | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, start date DEFAULT NULL::date, finish date DEFAULT NULL::date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | func
 public | time_bucket_gapfill                | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, start timestamp without time zone DEFAULT NULL::timestamp without time zone, finish timestamp without time zone DEFAULT NULL::timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket_gapfill                | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, start timestamp with time zone DEFAULT NULL::timestamp with time zone, finish timestamp with time zone DEFAULT NULL::timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | time_bucket_gapfill                | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, timezone text, start timestamp with time zone DEFAULT NULL::timestamp with time zone, finish timestamp with time zone DEFAULT NULL::timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket_gapfill                | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint, start smallint DEFAULT NULL::smallint, finish smallint DEFAULT NULL::smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | timescaledb_fdw_handler            | fdw_handler                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | timescaledb_fdw_validator          | void                                                                                                                                                                                                                                                                                                                                                                                                   | text[], oid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | timescaledb_post_restore           | boolean                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | timescaledb_pre_restore            | boolean                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
(84 rows)

\do public.*
                             List of operators
 Schema | Name | Left arg type | Right arg type | Result type | Description 
--------+------+---------------+----------------+-------------+-------------
(0 rows)

\dT c.*
                                              List of data types
 Schema |  Name  |                                         Description                                         
--------+--------+---------------------------------------------------------------------------------------------
 c      | c.cube | multi-dimensional cube '(FLOAT-1, FLOAT-2, ..., FLOAT-N), (FLOAT-1, FLOAT-2, ..., FLOAT-N)'
(1 row)

create table foo (f1 c.cube, f2 int);
drop extension cube;  -- fail, foo.f1 requires it
ERROR:  cannot drop extension cube because other objects depend on it
DETAIL:  column f1 of table foo depends on type c.cube
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
drop schema c;  -- fail, cube requires it
ERROR:  cannot drop schema c because other objects depend on it
DETAIL:  extension cube depends on schema c
column f1 of table foo depends on type c.cube
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
drop extension cube cascade;
NOTICE:  drop cascades to column f1 of table foo
\d foo
                Table "public.foo"
 Column |  Type   | Collation | Nullable | Default 
--------+---------+-----------+----------+---------
 f2     | integer |           |          | 

-- list what's installed
\dT public.*
     List of data types
 Schema | Name | Description 
--------+------+-------------
 public | rxid | 
(1 row)

\df public.*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          List of functions
 Schema |                Name                |                                                                                                                                                                                            Result data type                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                          Argument data types                                                                                                                                                                                                                                                                                                                                                                                           | Type 
--------+------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------
 public | add_compression_policy             | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, compress_after "any", if_not_exists boolean DEFAULT false, schedule_interval interval DEFAULT NULL::interval, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | add_continuous_aggregate_policy    | integer                                                                                                                                                                                                                                                                                                                                                                                                | continuous_aggregate regclass, start_offset "any", end_offset "any", schedule_interval interval, if_not_exists boolean DEFAULT false, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | add_data_node                      | TABLE(node_name name, host text, port integer, database name, node_created boolean, database_created boolean, extension_created boolean)                                                                                                                                                                                                                                                               | node_name name, host text, database name DEFAULT NULL::name, port integer DEFAULT NULL::integer, if_not_exists boolean DEFAULT false, bootstrap boolean DEFAULT true, password text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | add_dimension                      | TABLE(dimension_id integer, schema_name name, table_name name, column_name name, created boolean)                                                                                                                                                                                                                                                                                                      | hypertable regclass, column_name name, number_partitions integer DEFAULT NULL::integer, chunk_time_interval anyelement DEFAULT NULL::bigint, partitioning_func regproc DEFAULT NULL::regproc, if_not_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | add_job                            | integer                                                                                                                                                                                                                                                                                                                                                                                                | proc regproc, schedule_interval interval, config jsonb DEFAULT NULL::jsonb, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, scheduled boolean DEFAULT true, check_config regproc DEFAULT NULL::regproc, fixed_schedule boolean DEFAULT true, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | add_reorder_policy                 | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, index_name name, if_not_exists boolean DEFAULT false, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | func
 public | add_retention_policy               | integer                                                                                                                                                                                                                                                                                                                                                                                                | relation regclass, drop_after "any", if_not_exists boolean DEFAULT false, schedule_interval interval DEFAULT NULL::interval, initial_start timestamp with time zone DEFAULT NULL::timestamp with time zone, timezone text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | alter_data_node                    | TABLE(node_name name, host text, port integer, database name, available boolean)                                                                                                                                                                                                                                                                                                                       | node_name name, host text DEFAULT NULL::text, database name DEFAULT NULL::name, port integer DEFAULT NULL::integer, available boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | alter_job                          | TABLE(job_id integer, schedule_interval interval, max_runtime interval, max_retries integer, retry_period interval, scheduled boolean, config jsonb, next_start timestamp with time zone, check_config text)                                                                                                                                                                                           | job_id integer, schedule_interval interval DEFAULT NULL::interval, max_runtime interval DEFAULT NULL::interval, max_retries integer DEFAULT NULL::integer, retry_period interval DEFAULT NULL::interval, scheduled boolean DEFAULT NULL::boolean, config jsonb DEFAULT NULL::jsonb, next_start timestamp with time zone DEFAULT NULL::timestamp with time zone, if_exists boolean DEFAULT false, check_config regproc DEFAULT NULL::regproc                                                                                                                                                                                                                                                                                                                                                            | func
 public | approximate_row_count              | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | relation regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | attach_data_node                   | TABLE(hypertable_id integer, node_hypertable_id integer, node_name name)                                                                                                                                                                                                                                                                                                                               | node_name name, hypertable regclass, if_not_attached boolean DEFAULT false, repartition boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | attach_tablespace                  | void                                                                                                                                                                                                                                                                                                                                                                                                   | tablespace name, hypertable regclass, if_not_attached boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | cagg_migrate                       |                                                                                                                                                                                                                                                                                                                                                                                                        | IN cagg regclass, IN override boolean DEFAULT false, IN drop_old boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | proc
 public | chunk_compression_stats            | TABLE(chunk_schema name, chunk_name name, compression_status text, before_compression_table_bytes bigint, before_compression_index_bytes bigint, before_compression_toast_bytes bigint, before_compression_total_bytes bigint, after_compression_table_bytes bigint, after_compression_index_bytes bigint, after_compression_toast_bytes bigint, after_compression_total_bytes bigint, node_name name) | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | chunks_detailed_size               | TABLE(chunk_schema name, chunk_name name, table_bytes bigint, index_bytes bigint, toast_bytes bigint, total_bytes bigint, node_name name)                                                                                                                                                                                                                                                              | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | compress_chunk                     | regclass                                                                                                                                                                                                                                                                                                                                                                                               | uncompressed_chunk regclass, if_not_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | create_distributed_hypertable      | TABLE(hypertable_id integer, schema_name name, table_name name, created boolean)                                                                                                                                                                                                                                                                                                                       | relation regclass, time_column_name name, partitioning_column name DEFAULT NULL::name, number_partitions integer DEFAULT NULL::integer, associated_schema_name name DEFAULT NULL::name, associated_table_prefix name DEFAULT NULL::name, chunk_time_interval anyelement DEFAULT NULL::bigint, create_default_indexes boolean DEFAULT true, if_not_exists boolean DEFAULT false, partitioning_func regproc DEFAULT NULL::regproc, migrate_data boolean DEFAULT false, chunk_target_size text DEFAULT NULL::text, chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, time_partitioning_func regproc DEFAULT NULL::regproc, replication_factor integer DEFAULT NULL::integer, data_nodes name[] DEFAULT NULL::name[]                                            | func
 public | create_distributed_restore_point   | TABLE(node_name name, node_type text, restore_point pg_lsn)                                                                                                                                                                                                                                                                                                                                            | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | func
 public | create_hypertable                  | TABLE(hypertable_id integer, schema_name name, table_name name, created boolean)                                                                                                                                                                                                                                                                                                                       | relation regclass, time_column_name name, partitioning_column name DEFAULT NULL::name, number_partitions integer DEFAULT NULL::integer, associated_schema_name name DEFAULT NULL::name, associated_table_prefix name DEFAULT NULL::name, chunk_time_interval anyelement DEFAULT NULL::bigint, create_default_indexes boolean DEFAULT true, if_not_exists boolean DEFAULT false, partitioning_func regproc DEFAULT NULL::regproc, migrate_data boolean DEFAULT false, chunk_target_size text DEFAULT NULL::text, chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, time_partitioning_func regproc DEFAULT NULL::regproc, replication_factor integer DEFAULT NULL::integer, data_nodes name[] DEFAULT NULL::name[], distributed boolean DEFAULT NULL::boolean | func
 public | decompress_chunk                   | regclass                                                                                                                                                                                                                                                                                                                                                                                               | uncompressed_chunk regclass, if_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | delete_data_node                   | boolean                                                                                                                                                                                                                                                                                                                                                                                                | node_name name, if_exists boolean DEFAULT false, force boolean DEFAULT false, repartition boolean DEFAULT true, drop_database boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | delete_job                         | void                                                                                                                                                                                                                                                                                                                                                                                                   | job_id integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | detach_data_node                   | integer                                                                                                                                                                                                                                                                                                                                                                                                | node_name name, hypertable regclass DEFAULT NULL::regclass, if_attached boolean DEFAULT false, force boolean DEFAULT false, repartition boolean DEFAULT true, drop_remote_data boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | detach_tablespace                  | integer                                                                                                                                                                                                                                                                                                                                                                                                | tablespace name, hypertable regclass DEFAULT NULL::regclass, if_attached boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | detach_tablespaces                 | integer                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | distributed_exec                   |                                                                                                                                                                                                                                                                                                                                                                                                        | IN query text, IN node_list name[] DEFAULT NULL::name[], IN transactional boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | proc
 public | drop_chunks                        | SETOF text                                                                                                                                                                                                                                                                                                                                                                                             | relation regclass, older_than "any" DEFAULT NULL::unknown, newer_than "any" DEFAULT NULL::unknown, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | first                              | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | anyelement, "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | agg
 public | get_telemetry_report               | jsonb                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | histogram                          | integer[]                                                                                                                                                                                                                                                                                                                                                                                              | double precision, double precision, double precision, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | agg
 public | hypertable_compression_stats       | TABLE(total_chunks bigint, number_compressed_chunks bigint, before_compression_table_bytes bigint, before_compression_index_bytes bigint, before_compression_toast_bytes bigint, before_compression_total_bytes bigint, after_compression_table_bytes bigint, after_compression_index_bytes bigint, after_compression_toast_bytes bigint, after_compression_total_bytes bigint, node_name name)        | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_detailed_size           | TABLE(table_bytes bigint, index_bytes bigint, toast_bytes bigint, total_bytes bigint, node_name name)                                                                                                                                                                                                                                                                                                  | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_index_size              | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | index_name regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | hypertable_size                    | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | interpolate                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | value bigint, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | interpolate                        | double precision                                                                                                                                                                                                                                                                                                                                                                                       | value double precision, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | func
 public | interpolate                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | value integer, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | interpolate                        | real                                                                                                                                                                                                                                                                                                                                                                                                   | value real, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | interpolate                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | value smallint, prev record DEFAULT NULL::record, next record DEFAULT NULL::record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | last                               | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | anyelement, "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | agg
 public | locf                               | anyelement                                                                                                                                                                                                                                                                                                                                                                                             | value anyelement, prev anyelement DEFAULT NULL::unknown, treat_null_as_missing boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | move_chunk                         | void                                                                                                                                                                                                                                                                                                                                                                                                   | chunk regclass, destination_tablespace name, index_destination_tablespace name DEFAULT NULL::name, reorder_index regclass DEFAULT NULL::regclass, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | recompress_chunk                   |                                                                                                                                                                                                                                                                                                                                                                                                        | IN chunk regclass, IN if_not_compressed boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | proc
 public | refresh_continuous_aggregate       |                                                                                                                                                                                                                                                                                                                                                                                                        | IN continuous_aggregate regclass, IN window_start "any", IN window_end "any"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | proc
 public | remove_compression_policy          | boolean                                                                                                                                                                                                                                                                                                                                                                                                | hypertable regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | remove_continuous_aggregate_policy | void                                                                                                                                                                                                                                                                                                                                                                                                   | continuous_aggregate regclass, if_not_exists boolean DEFAULT false, if_exists boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | remove_reorder_policy              | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | func
 public | remove_retention_policy            | void                                                                                                                                                                                                                                                                                                                                                                                                   | relation regclass, if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | reorder_chunk                      | void                                                                                                                                                                                                                                                                                                                                                                                                   | chunk regclass, index regclass DEFAULT NULL::regclass, "verbose" boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | run_job                            |                                                                                                                                                                                                                                                                                                                                                                                                        | IN job_id integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | proc
 public | set_adaptive_chunking              | record                                                                                                                                                                                                                                                                                                                                                                                                 | hypertable regclass, chunk_target_size text, INOUT chunk_sizing_func regproc DEFAULT '_timescaledb_internal.calculate_chunk_interval'::regproc, OUT chunk_target_size bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | func
 public | set_chunk_time_interval            | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, chunk_time_interval anyelement, dimension_name name DEFAULT NULL::name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | set_integer_now_func               | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, integer_now_func regproc, replace_if_exists boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | set_number_partitions              | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, number_partitions integer, dimension_name name DEFAULT NULL::name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | func
 public | set_replication_factor             | void                                                                                                                                                                                                                                                                                                                                                                                                   | hypertable regclass, replication_factor integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | show_chunks                        | SETOF regclass                                                                                                                                                                                                                                                                                                                                                                                         | relation regclass, older_than "any" DEFAULT NULL::unknown, newer_than "any" DEFAULT NULL::unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | show_tablespaces                   | SETOF name                                                                                                                                                                                                                                                                                                                                                                                             | hypertable regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | time_bucket                        | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint, "offset" bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | time_bucket                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket                        | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer, "offset" integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | time_bucket                        | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, origin date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | func
 public | time_bucket                        | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, origin timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, "offset" interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, origin timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, timezone text, origin timestamp with time zone DEFAULT NULL::timestamp with time zone, "offset" interval DEFAULT NULL::interval                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | func
 public | time_bucket                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | func
 public | time_bucket                        | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint, "offset" smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket_gapfill                | bigint                                                                                                                                                                                                                                                                                                                                                                                                 | bucket_width bigint, ts bigint, start bigint DEFAULT NULL::bigint, finish bigint DEFAULT NULL::bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | func
 public | time_bucket_gapfill                | integer                                                                                                                                                                                                                                                                                                                                                                                                | bucket_width integer, ts integer, start integer DEFAULT NULL::integer, finish integer DEFAULT NULL::integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | time_bucket_gapfill                | date                                                                                                                                                                                                                                                                                                                                                                                                   | bucket_width interval, ts date, start date DEFAULT NULL::date, finish date DEFAULT NULL::date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | func
 public | time_bucket_gapfill                | timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                            | bucket_width interval, ts timestamp without time zone, start timestamp without time zone DEFAULT NULL::timestamp without time zone, finish timestamp without time zone DEFAULT NULL::timestamp without time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket_gapfill                | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, start timestamp with time zone DEFAULT NULL::timestamp with time zone, finish timestamp with time zone DEFAULT NULL::timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | time_bucket_gapfill                | timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                               | bucket_width interval, ts timestamp with time zone, timezone text, start timestamp with time zone DEFAULT NULL::timestamp with time zone, finish timestamp with time zone DEFAULT NULL::timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | func
 public | time_bucket_gapfill                | smallint                                                                                                                                                                                                                                                                                                                                                                                               | bucket_width smallint, ts smallint, start smallint DEFAULT NULL::smallint, finish smallint DEFAULT NULL::smallint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | func
 public | timescaledb_fdw_handler            | fdw_handler                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | timescaledb_fdw_validator          | void                                                                                                                                                                                                                                                                                                                                                                                                   | text[], oid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | func
 public | timescaledb_post_restore           | boolean                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
 public | timescaledb_pre_restore            | boolean                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | func
(84 rows)

\do public.*
                             List of operators
 Schema | Name | Left arg type | Right arg type | Result type | Description 
--------+------+---------------+----------------+-------------+-------------
(0 rows)

\dT c.*
     List of data types
 Schema | Name | Description 
--------+------+-------------
(0 rows)

\df c.*
                       List of functions
 Schema | Name | Result data type | Argument data types | Type 
--------+------+------------------+---------------------+------
(0 rows)

\do c.*
                             List of operators
 Schema | Name | Left arg type | Right arg type | Result type | Description 
--------+------+---------------+----------------+-------------+-------------
(0 rows)

drop schema c;
