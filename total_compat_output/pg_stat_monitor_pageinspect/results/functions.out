DROP ROLE IF EXISTS su;
NOTICE:  role "su" does not exist, skipping
CREATE USER su WITH SUPERUSER;
SET ROLE su;
CREATE EXTENSION pg_stat_monitor;
CREATE USER u1;
SELECT pg_stat_monitor_reset();
 pg_stat_monitor_reset 
-----------------------
 
(1 row)

SELECT routine_schema, routine_name, routine_type, data_type FROM information_schema.routines WHERE routine_schema = 'public' ORDER BY routine_name COLLATE "C";
 routine_schema |       routine_name        | routine_type | data_type 
----------------+---------------------------+--------------+-----------
 public         | brin_metapage_info        | FUNCTION     | record
 public         | brin_page_items           | FUNCTION     | record
 public         | brin_page_type            | FUNCTION     | text
 public         | brin_revmap_data          | FUNCTION     | tid
 public         | bt_metap                  | FUNCTION     | record
 public         | bt_page_items             | FUNCTION     | record
 public         | bt_page_items             | FUNCTION     | record
 public         | bt_page_stats             | FUNCTION     | record
 public         | decode_error_level        | FUNCTION     | text
 public         | fsm_page_contents         | FUNCTION     | text
 public         | get_cmd_type              | FUNCTION     | text
 public         | get_histogram_timings     | FUNCTION     | text
 public         | get_raw_page              | FUNCTION     | bytea
 public         | get_raw_page              | FUNCTION     | bytea
 public         | gin_leafpage_items        | FUNCTION     | record
 public         | gin_metapage_info         | FUNCTION     | record
 public         | gin_page_opaque_info      | FUNCTION     | record
 public         | gist_page_items           | FUNCTION     | record
 public         | gist_page_items_bytea     | FUNCTION     | record
 public         | gist_page_opaque_info     | FUNCTION     | record
 public         | hash_bitmap_info          | FUNCTION     | record
 public         | hash_metapage_info        | FUNCTION     | record
 public         | hash_page_items           | FUNCTION     | record
 public         | hash_page_stats           | FUNCTION     | record
 public         | hash_page_type            | FUNCTION     | text
 public         | heap_page_item_attrs      | FUNCTION     | record
 public         | heap_page_item_attrs      | FUNCTION     | record
 public         | heap_page_items           | FUNCTION     | record
 public         | heap_tuple_infomask_flags | FUNCTION     | record
 public         | histogram                 | FUNCTION     | record
 public         | page_checksum             | FUNCTION     | smallint
 public         | page_header               | FUNCTION     | record
 public         | pg_stat_monitor_internal  | FUNCTION     | record
 public         | pg_stat_monitor_reset     | FUNCTION     | void
 public         | pg_stat_monitor_version   | FUNCTION     | text
 public         | pgsm_create_11_view       | FUNCTION     | integer
 public         | pgsm_create_13_view       | FUNCTION     | integer
 public         | pgsm_create_14_view       | FUNCTION     | integer
 public         | pgsm_create_15_view       | FUNCTION     | integer
 public         | pgsm_create_view          | FUNCTION     | integer
 public         | range                     | FUNCTION     | ARRAY
 public         | tuple_data_split          | FUNCTION     | ARRAY
 public         | tuple_data_split          | FUNCTION     | ARRAY
(43 rows)

SET ROLE u1;
SELECT routine_schema, routine_name, routine_type, data_type FROM information_schema.routines WHERE routine_schema = 'public' ORDER BY routine_name COLLATE "C";
 routine_schema |       routine_name        | routine_type | data_type 
----------------+---------------------------+--------------+-----------
 public         | brin_metapage_info        | FUNCTION     | record
 public         | brin_page_items           | FUNCTION     | record
 public         | brin_page_type            | FUNCTION     | text
 public         | brin_revmap_data          | FUNCTION     | tid
 public         | bt_metap                  | FUNCTION     | record
 public         | bt_page_items             | FUNCTION     | record
 public         | bt_page_items             | FUNCTION     | record
 public         | bt_page_stats             | FUNCTION     | record
 public         | decode_error_level        | FUNCTION     | text
 public         | fsm_page_contents         | FUNCTION     | text
 public         | get_cmd_type              | FUNCTION     | text
 public         | get_histogram_timings     | FUNCTION     | text
 public         | get_raw_page              | FUNCTION     | bytea
 public         | get_raw_page              | FUNCTION     | bytea
 public         | gin_leafpage_items        | FUNCTION     | record
 public         | gin_metapage_info         | FUNCTION     | record
 public         | gin_page_opaque_info      | FUNCTION     | record
 public         | gist_page_items           | FUNCTION     | record
 public         | gist_page_items_bytea     | FUNCTION     | record
 public         | gist_page_opaque_info     | FUNCTION     | record
 public         | hash_bitmap_info          | FUNCTION     | record
 public         | hash_metapage_info        | FUNCTION     | record
 public         | hash_page_items           | FUNCTION     | record
 public         | hash_page_stats           | FUNCTION     | record
 public         | hash_page_type            | FUNCTION     | text
 public         | heap_page_item_attrs      | FUNCTION     | record
 public         | heap_page_item_attrs      | FUNCTION     | record
 public         | heap_page_items           | FUNCTION     | record
 public         | heap_tuple_infomask_flags | FUNCTION     | record
 public         | histogram                 | FUNCTION     | record
 public         | page_checksum             | FUNCTION     | smallint
 public         | page_header               | FUNCTION     | record
 public         | pg_stat_monitor_internal  | FUNCTION     | record
 public         | pg_stat_monitor_version   | FUNCTION     | text
 public         | range                     | FUNCTION     | ARRAY
 public         | tuple_data_split          | FUNCTION     | ARRAY
 public         | tuple_data_split          | FUNCTION     | ARRAY
(37 rows)

SET ROLE su;
DROP USER u1;
DROP EXTENSION pg_stat_monitor;
DROP USER su;
ERROR:  current user cannot be dropped
